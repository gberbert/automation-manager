# Tech Stack Documentation

## Project Overview
**Name:** Automation Manager
**Description:** A web application for automating social media content creation, scheduling, approval, and engagement tracking (specifically for LinkedIn and Instagram).

## Frontend
**Core:**
- **Framework:** React 19
- **Build Tool:** Vite 7
- **Language:** JavaScript (ES Modules)

**UI & Styling:**
- **Styling Engine:** TailwindCSS v3
- **Icons:** Lucide React
- **Drag & Drop:** @dnd-kit

**Utilities:**
- **Routing:** React Router DOM v7
- **PWA Support:** vite-plugin-pwa
- **Date Handling:** Native JS dates (localized)

**Integration:**
- **Firebase SDK:** v12.6.0

## Backend
**Core:**
- **Runtime:** Node.js
- **Framework:** Express.js v5
- **Module System:** CommonJS (server-side) / ES Modules (client-side)

**Database & Services:**
- **Database:** Firebase Firestore
- **Authentication:** Firebase Auth / Service Accounts
- **Media Storage:** Cloudinary
- **AI Engine:** Google Gemini (@google/generative-ai)
- **Database Client:** @supabase/supabase-js (used in specific modules)

**Automation & Scraping:**
- **Browser Automation:** Puppeteer
- **Scheduling:** Node Cron / UptimeRobot Pings

**Security & Utilities:**
- **Security:** CORS, Dotenv
- **HTTP Client:** Axios

## Development Tools
- **Process Management:** Concurrently (running frontend/backend together)
- **Package Manager:** npm

## Infrastructure
- **Hosting:** 
    - Frontend: Served statically or via Vercel (implied by configuration)
    - Backend: Render or similar container service (Node.js)

## Application Architecture

### Directory Structure & Responsibilities

#### Frontend (`/client/src`)
*   **`pages/`**: Main Application Views.
    *   **`Dashboard.jsx`**: Overview of system status.
    *   **`Approvals.jsx`**: Interface for reviewing and approving generated content.
    *   **`Approved.jsx`**: List of content ready for publication.
    *   **`Engagement.jsx`**: Tracking comments and interactions.
    *   **`Linkedin.jsx` / `Instagram.jsx`**: Platform-specific configuration and management.
    *   **`Repost.jsx`**: "AI Assistant" - Interface for creating reposts, comments, and AI-generated replies to comments (screenshot inputs supported).
    *   **`Published.jsx`**: History of published content.
    *   **`Login.jsx`**: Authentication entry point.
    *   **`Settings.jsx`**: Global configuration (Scheduler slots, Prompt instructions).
*   **`components/`**: Reusable UI Elements.
*   **`sw.js`**: Service Worker for PWA functionality.

#### Backend (`/server`)
*   **`index.js`**: Main Application Entry Point.
    *   **API Routes**: Endpoint definitions (`/api/generate-content`, `/api/cron`, etc.).
    *   **Scheduler Logic**: Internal logic to check time windows and trigger post creation/publication.
*   **`services/`**: specialized services.
    *   **`linkedinScraper.js`**: Puppeteer-based logic for scraping comments and interactions when API is insufficient.
*   **`utils/`**: Helper Modules.
    *   **`gemini.js`**: Integration with Google Gemini for text generation.
    *   **`linkedin.js`**: wrappers for LinkedIn API interactions (Publishing, Image Upload).
    *   **`mediaHandler.js`**: Cloudinary uploads and Unsplash image search.

### Data Flow Architecture

```mermaid
graph TD
    User-->|Interacts| Frontend[Frontend (React/Vite)]
    Frontend-->|API Calls| Backend[Backend API (Express)]
    
    subgraph "Backend Processes"
        Scheduler[Cron / Validation Loop]
        Generator[Content Generator]
        Publisher[Content Publisher]
        Scraper[Puppeteer Scraper]
    end
    
    Backend-->|Read/Write| Firestore[(Firestore DB)]
    
    Scheduler-->|Trigger| Generator
    Scheduler-->|Trigger| Publisher
    
    Generator-->|Generate Text| Gemini[Google Gemini AI]
    Generator-->|Search Images| Unsplash[Unsplash API]
    Generator-->|Save Draft| Firestore
    
    Publisher-->|Upload Media| Cloudinary[Cloudinary]
    Publisher-->|Post Content| LinkedIn[LinkedIn API]
    
    Backend-->|Trigger Engagement| Scraper
    Scraper-->|Scrape Comments| LinkedInBrowser[LinkedIn Web (Headless)]
    Scraper-->|Store Comments| Firestore
```

### Key Functions Breakdown

#### 1. Content Generation Engine
*   **Automatic Trigger**: controlled by `node-cron` or external pings (UptimeRobot) hitting `/api/cron`.
*   **Logic**: Checks configured time slots in Firestore. If a slot matches and hasn't run today, calls `gemini.js` to create a post based on defined topics/persona.
*   **Media**: Automaticaly searches Unsplash or generates prompts for images.

#### 2. Publication Pipeline
*   **Approval Workflow**: Posts are generated with `status: 'pending'`. Users must approve them in the Frontend (`Approvals.jsx`).
*   **Publication**: Scheduler checks for `status: 'approved'` posts. It respects the `publicationOrder` and attempts to publish via LinkedIn API.

#### 3. Engagement System
*   **Comment Sync**: Can be triggered manually or via scheduler. Uses Puppeteer (`linkedinScraper.js`) to log in as the user and scrape recent comments on posts.
*   **Reply Generation**: Uses Gemini to suggest or draft replies to comments (including "Reply to Picture/Print" mode).
